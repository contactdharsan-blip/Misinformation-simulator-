# Test Outputs Directory

This directory contains all simulation runs and test outputs, organized by simulation type and run date.

## Directory Structure

### Literature-Aligned Runs
**Location**: `literature_aligned_runs/`

Simulations run with parameters aligned to scientific literature:
- Age-based sharing (65+ share 7x more)
- Education-belief correlation (-0.25)
- Correction effectiveness (25%)
- Base share rate (8.5%)
- Spread ratio (6x false vs true)

### World Simulations
**Location**: `world_simulations_YYYYMMDD_HHMMSS/`

Batch runs of all world configurations:
- `world_baseline/` - Baseline configuration
- `world_high_trust_gov/` - High government trust scenario
- `world_low_trust_gov/` - Low government trust scenario
- `world_strong_moderation/` - Strong moderation scenario
- `world_collapsed_local_media/` - Collapsed local media scenario
- `world_high_religion_hub/` - High religion hub scenario
- `world_outrage_algorithm/` - Outrage algorithm scenario
- `world_phoenix/` - Phoenix metro area
- `world_phoenix_multi_misinformation/` - Phoenix with multiple misinformation claims
- `world_phoenix_truth_random/` - Phoenix with truth + random misinformation

### Phoenix Test Runs
**Location**: Various directories

- `phoenix_neighborhood_test/` - Comprehensive neighborhood differentiation test
- `phoenix_large_10k_per_neighborhood/` - Large-scale (60k agents)
- `phoenix_with_misinfo/` - Phoenix with truth + 3 misinformation claims
- `phoenix_run/` - Initial Phoenix run
- `phoenix_test/` - Phoenix test configuration
- `phoenix_misinfo/` - Phoenix with misinformation only
- `phoenix_detailed/` - Detailed run with frequent snapshots

## Literature Alignment

All simulations now use parameters aligned with scientific literature:

1. **Age Effect**: 65+ share 7x more than 18-29 (Guess et al., 2019)
2. **Education Effect**: -0.25 correlation with belief (Pennycook & Rand, 2021)
3. **Correction Effectiveness**: 25% reduction (Walter & Tukachinsky, 2020)
4. **Base Share Rate**: 8.5% (Guess et al., 2019)
5. **Spread Ratio**: 6x false vs true (Vosoughi et al., 2018)

## Expected Results

Based on literature:
- **Adoption rates**: 20-35% for misinformation (Roozenbeek et al., 2020)
- **Peak timing**: 21 ± 7 days (Cinelli et al., 2020)
- **Age differences**: 7x sharing ratio for 65+ vs young
- **Education differences**: Higher education → lower misinformation belief

## Running Simulations

### Run all world configs:
```bash
python3 run_all_world_simulations.py
```

### Run literature-aligned tests:
```bash
python3 update_test_outputs.py
```

### Run neighborhood differentiation test:
```bash
python3 test_neighborhood_differentiation.py
```

### Run a single simulation:
```bash
python3 -m sim run --config configs/world_baseline.yaml --out test_outputs/my_run
```

### Analyze spread patterns:
```bash
python3 << 'EOF'
import pandas as pd
from pathlib import Path

output_dir = Path('test_outputs/my_run')
metrics = pd.read_csv(output_dir / 'daily_metrics.csv')

for claim in sorted(metrics['claim'].unique()):
    claim_data = metrics[metrics['claim'] == claim].sort_values('day')
    adoption = claim_data['adoption_fraction'].values
    days = claim_data['day'].values
    
    mid_day = days[(adoption > 0.5).argmax()] if (adoption > 0.5).any() else None
    max_increase = (adoption[1:] - adoption[:-1]).max() if len(adoption) > 1 else 0
    
    print(f"Claim {claim}:")
    print(f"  Days to 50%: {mid_day}")
    print(f"  Max daily increase: {max_increase:.1%}")
EOF
```

## File Organization

Each simulation run directory contains:
- `daily_metrics.csv` - Time-series metrics for all claims
- `belief_snapshots.parquet` - Belief states at key time points (if enabled)
- `summary.json` - Summary statistics
- `config_resolved.yaml` - Final resolved configuration
- `plots/` - Visualization plots
- `run_metadata.json` - Run metadata
- `strain_info.json` - Information about strains/claims

## Notes

- Large files (`.parquet` snapshots) may be excluded from git
- Test results can be regenerated by running the corresponding scripts
- All simulations use literature-aligned parameters as of the latest update
